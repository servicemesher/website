---
title: "使用Knative来作为Api聚合层的实践"
author: "高松"
authorlink: "https://github.com/Yisaer"
date: 2019-08-22T14:43:58+08:00
draft: false
banner: "/img/blog/banners/using-knative-as-api-aggregator-layer.jpg"
summary: "本文是介绍通过Knative在实际业务中起到Api聚合层的实践"
tags: ["knative","serverless"]
categories: ["serverless"]
keywords: ["serverless","knative","faas"]
---

## 前言

在2019年的今天，微服务这个词对于绝大多数的开发者都不再陌生。时至今日，非常多的项目都逐渐开始实践起微服务这一设计思想，将原本的磐石应用逐渐按照领域模型切分成一个个小的服务，对于微服务的实践也日渐趋向于成熟。在笔者目前工作的业务实践中，同样也使用着微服务作为后端服务的架构设立思想，微服务为我们的代码管理与项目管理带来了非常大的简便性。然而随着需求的迭代与代码的日益积累，曾经泾渭分明、代码精简的各个微服务也逐渐开始变得逻辑复杂、代码冗余，每个微服务之间有似乎存在着剪不断理还乱的关系。2019年是Serverless蓬勃发展的一年，作为Serverless领域的中的明星产品，Knative在今年8月份发布了0.8版本，其中Serving组件的0.8版本在笔者看来才真正达到了可用的程度。本篇文章将介绍笔者是如何使用Knative来作为API聚合层，来解决我们在实践微服务中所遇到的问题的。

## 微服务迭代之痛

在笔者目前的工作实践中，我们在架构设计中严格遵循着微服务的设计里面。每块业务上独立的领域作为一个微服务，每个微服务有自己单独的数据库。任何一个微服务只能读写自己的数据库，而绝对不能干涉其他微服务的数据库，所有微服务之间获取信息都是通过http协议进行通信。在业务初期时，由于产品处于雏形中，所有服务的接口在逻辑上都比较简单，大部分接口都可以看做各自领域模型上的增删改查形态，服务与服务之间的调用也并不密集。